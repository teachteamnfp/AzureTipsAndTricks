<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 209 - Prebuilt Terraform Image for Infrastructure Automation | Azure Tips and Tricks</title>
    <meta name="description" content="">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
  <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.285e1406.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/126.2f361011.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.e20fc808.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.c911c2a4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.f21aa11e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.6799a732.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.ec00b13d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.75cd47d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.1c388ee4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.e9b670e3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.cca0d31c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.f9b88612.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.09c7f752.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.0969bd96.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.f93d5245.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/111.e5b3cc04.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.2ccd9c07.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.0bfa789f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.6c10fda7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.12760afb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.1bb5df9e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/117.c3b9daba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.f18ac4ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.b923f9bc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/12.75e82287.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.13600fb6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.5d6db097.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.b226fb7a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.ddb43aca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.abe8ea30.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.8ed66a56.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/127.ba597d55.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.962d75e0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.79f9ee54.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.4af9d49f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.887198cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.89a9496e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.14f4890c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.e4ee2e7e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.2952d4f9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.03ac3abd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.7828c2ca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.ca984c3e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.7f282782.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.e821f212.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.1925053d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.78150865.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.fe1db4ec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.b27115f3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.21464404.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.9def22cf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.574b3a81.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.0373ce1f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.2076baa2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.c81c2d2f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.7746f711.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.14377b32.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.ab88dec8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.5077e4f4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.2cc29d17.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.646570cd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.d622a8ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.8dd7c0ba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.222d6fd1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.78b06418.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.07f2292b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.5f80cf69.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.cf92e181.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.5b3e8d1f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.d3afe447.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.1d2591ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.a97bc06c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.43d7981b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.6cdfaffa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.a13d4935.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.0f7b4f46.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.93a960b4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.002df0be.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.9f3452b0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.0a836bc8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.efc893bb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.50b990f5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.96dc4c47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.4913aa57.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.b6c48ae3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.2ccf39c4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.050a3195.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.3a95e429.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.0eb829a5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.dc34f489.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.4832fe22.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.9cf21183.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.53f6dc63.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.7040ef7c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.3eaabfd5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.a35cec0d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.af772c20.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.6c2e2b82.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.cbe63d00.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.63cbbdda.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.45656097.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.7332f25d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.ff63db92.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.108da660.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.106aa95a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.1f0123c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.4b5164ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.2544a143.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.9bc71f10.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/198.d8d59407.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/199.7ea8af92.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.6d9d65a3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/200.802210d1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/201.a9c9617c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/202.fa619d02.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/203.8e6aa395.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/204.73c60792.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/205.14c54ab4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/206.a2516062.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/207.cb888857.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/208.2e620ebf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/209.08b3ca66.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.f472f6d6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/210.0432e839.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/211.0e87561f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/212.751b2962.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/213.36af6069.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/214.f7701093.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/215.edf9c83a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/216.3481efb6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/217.2ad611b0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/218.399566f6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/219.fe9386cd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.85d1808f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/220.6f8a17e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/221.2580ce23.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.82c68b8a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.00838e48.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.f4ce27e0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.4287bd58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.e4b6714e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.335568a0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.ff868554.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/3.5ca0f648.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.28709da6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.8636c321.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.19e4be29.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.3371dbac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.c6839324.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.5ca3080b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.3943bd96.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.c6d725a2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.0051fd63.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.a1f0d27f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.fb468a2f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.e6245820.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.f4008434.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.426456c2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.60729ee0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.23626ec8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.cabfc289.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.c77fff93.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.86cfa80d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.72adf3ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.b32c499c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.6c2744ce.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.8d8d17e8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.7d3aeb07.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.98ad6c94.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.75d4d5e5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.8490a250.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.0a99f4a6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.eb1e05ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.9f186ffe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.7c11f7e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.c702ed47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.726faf87.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.86b4032f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.90378d58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.ea6a7eee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.08358581.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.3a60f335.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.87d306a6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.3f8b2822.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.3683ed15.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.066e6832.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.ee00b141.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.79e994b7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.a6fe10e2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.d2e8ccbb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.ced74f55.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.8fda430f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.26808a01.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.b698fc60.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.fc7c5579.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.165ece1c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.f0622a00.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.29a6f5a5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.83a0b870.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.c1b4c145.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.d489ff5e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.1f1497c2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.b096b670.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.4a8b1607.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.7c33798d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/87.3367df17.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.fa039b0b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.45df651f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.ae4b229a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.a5afef77.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.d4e2e9b1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.baa8d109.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.1ff6bde2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.e68ea7cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/95.c2568d47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.f70e56ce.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.457a4324.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.f08b949a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.bd8c9e8c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/vendors~docsearch.9a8918f9.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/AzureTipsAndTricks/#site-map" class="nav-link">eBooks</a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/AzureTipsAndTricks/#site-map" class="nav-link">eBooks</a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/" class="sidebar-link">Welcome</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Recently Added</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip218.html" class="sidebar-link">Tip 218 - Build and deploy your first app with the Azure SDK for Java on Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip217.html" class="sidebar-link">Tip 217 - Getting Started with Azure Databricks</a></li><li><a href="/AzureTipsAndTricks/blog/tip216.html" class="sidebar-link">Tip 216 - How to deploy ASP.NET application to Docker Hub and Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip215.html" class="sidebar-link">Tip 215 - Reusing Network Service Groups across Virtual Machines</a></li><li><a href="/AzureTipsAndTricks/blog/tip214.html" class="sidebar-link">Tip 214 - Explicitly Name Logic API Connections</a></li><li><a href="/AzureTipsAndTricks/blog/tip213.html" class="sidebar-link">Tip 213 - Working with the Azure billing and cost management API</a></li><li><a href="/AzureTipsAndTricks/blog/tip212.html" class="sidebar-link">Tip 212 - How to restore accidental deletion of your Azure Storage Blobs</a></li><li><a href="/AzureTipsAndTricks/blog/tip211.html" class="sidebar-link">Tip 211 - Working with Azure Functions using PowerShell (Preview)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/AzureTipsAndTricks/blog/tip210.html" class="sidebar-link">Tip 210 - Working with Azure Blueprints</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Service</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>APIM</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AzCopy</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Blueprints</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CDN</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cloud Shell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cognitive Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cosmos DB</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Front Door</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Functions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HD Insight</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Key Vault</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Logic Apps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Machine Learning</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Media Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Monitor</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Portal</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Productivity</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SAP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SDKs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SendGrid</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SignalR</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Virtual Machines</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip209.html" class="active sidebar-link">Tip 209 - Prebuilt Terraform Image for Infrastructure Automation</a></li><li><a href="/AzureTipsAndTricks/blog/tip207.html" class="sidebar-link">Tip 207 - Reduce Bruce Force attacks to Azure VMs</a></li><li><a href="/AzureTipsAndTricks/blog/tip201.html" class="sidebar-link">Tip 201 - Creating Custom VM Images in Azure using Packer</a></li><li><a href="/AzureTipsAndTricks/blog/tip191.html" class="sidebar-link">Tip 191 - Serial console access with Azure VMs - Troubleshooting and diagnosing</a></li><li><a href="/AzureTipsAndTricks/blog/tip9.html" class="sidebar-link">Tip 9 - Quickly Connect to Windows VMs with RDP</a></li><li><a href="/AzureTipsAndTricks/blog/tip10.html" class="sidebar-link">Tip 10 - Quickly Connect to a Linux VM with SSH</a></li><li><a href="/AzureTipsAndTricks/blog/tip12.html" class="sidebar-link">Tip 12 - Easily Start, Restart, Stop or Delete Multiple VMs</a></li><li><a href="/AzureTipsAndTricks/blog/tip53.html" class="sidebar-link">Tip 53 - Prebuilt Azure VMs ready for Containers</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>VNET</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page" data-v-0e4468e2> <div class="content default" data-v-0e4468e2><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>👊 that ⭐️ button on the official <a href="https://github.com/Microsoft/AzureTipsAndTricks/" target="_blank" rel="noopener noreferrer">GitHub repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to stay up to date.</p> <p>💡 Learn more : <a href="https://docs.microsoft.com/en-us/azure/terraform/terraform-vm-msi?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Terraform Image from Azure Marketplace<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>This post was brought to you by <strong><a href="https://twitter.com/kumarallamraju" target="_blank" rel="noopener noreferrer">Kumar Allamraju<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong>.</p> <h4 id="prebuilt-terraform-image-to-automate-infrastructure-deployment"><a href="#prebuilt-terraform-image-to-automate-infrastructure-deployment" aria-hidden="true" class="header-anchor">#</a> Prebuilt Terraform Image to automate Infrastructure Deployment</h4> <p>Microsoft continues to expand support for  Infrastructure Automation with the launch of a fully configured version of <a href="https://www.terraform.io?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Terraform<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in Azure Marketplace. This enables easier adoption for users looking to use Terraform as their primary provisioning tool.</p> <p>The list includes</p> <ul><li>Terraform (latest)</li> <li>Azure CLI 2.0</li> <li>Managed Service Identity (MSI) VM Extension</li></ul> <p>In few simple steps, we will learn to provision an Ubuntu VM and allows us to automate the infrastructure deployment  using Terraform.</p> <h4 id="_1-in-the-azure-portal-go-to-create-a-resource-and-search-for-terraform-in-the-search-box"><a href="#_1-in-the-azure-portal-go-to-create-a-resource-and-search-for-terraform-in-the-search-box" aria-hidden="true" class="header-anchor">#</a> 1. In the Azure portal, go to + Create a resource and search for &quot;terraform&quot; in the search box.</h4> <img src="/AzureTipsAndTricks/files/tf-step1.jpg"> <h4 id="_2-select-terraform-and-create"><a href="#_2-select-terraform-and-create" aria-hidden="true" class="header-anchor">#</a> 2. Select Terraform and Create</h4> <img src="/AzureTipsAndTricks/files/tf-step2.jpg"> <h4 id="_3-complete-the-provisioning-wizard-and-buy-the-virtual-machine-from-azure-marketplace"><a href="#_3-complete-the-provisioning-wizard-and-buy-the-virtual-machine-from-azure-marketplace" aria-hidden="true" class="header-anchor">#</a> 3. Complete the provisioning wizard and Buy the virtual machine from Azure marketplace.</h4> <img src="/AzureTipsAndTricks/files/tf-step3.jpg"> <h4 id="_4-the-terraform-vm-image"><a href="#_4-the-terraform-vm-image" aria-hidden="true" class="header-anchor">#</a> 4. The Terraform VM image:</h4> <ul><li>Creates a VM with system-assigned identity that's based on the Ubuntu 16.04 LTS image.</li> <li>Installs the MSI extension on the VM to allow OAuth tokens to be issued for Azure resources.</li> <li>Assigns RBAC permissions to the managed identity, granting owner rights for the resource group.</li> <li>Creates a Terraform template folder (tfTemplate).
Pre-configures a Terraform remote state with the Azure back end.</li></ul> <h4 id="_5-ssh-to-the-vm-and-run-the-below-script-in-your-home-directory-tfenv-sh"><a href="#_5-ssh-to-the-vm-and-run-the-below-script-in-your-home-directory-tfenv-sh" aria-hidden="true" class="header-anchor">#</a> 5. SSH to the VM and run the below script in your home directory<code>~ . ~/tfEnv.sh</code></h4> <p>This script uses az CLI to authenticate with Azure and assign the virtual machine Managed Identity contributor permission on your subscription. You can verify this by going in to the VM's Identity page under Settings</p> <img src="/AzureTipsAndTricks/files/tf-step4.jpg"> <h4 id="_6-create-a-file-named-azurevm-tf-and-copy-the-following-code"><a href="#_6-create-a-file-named-azurevm-tf-and-copy-the-following-code" aria-hidden="true" class="header-anchor">#</a> 6. Create a file named <code>azurevm.tf</code> and copy the following code.</h4> <p>Note: SSH key data is provided in the ssh_keys section. Provide a valid public SSH key in the key_data field.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># Create a resource group if it doesn’t exist
resource &quot;azurerm_resource_group&quot; &quot;myterraformgroup&quot; {
    name     = &quot;myResourceGroup&quot;
    location = &quot;eastus&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create virtual network
resource &quot;azurerm_virtual_network&quot; &quot;myterraformnetwork&quot; {
    name                = &quot;myVnet&quot;
    address_space       = [&quot;10.0.0.0/16&quot;]
    location            = &quot;eastus&quot;
    resource_group_name = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create subnet
resource &quot;azurerm_subnet&quot; &quot;myterraformsubnet&quot; {
    name                 = &quot;mySubnet&quot;
    resource_group_name  = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    virtual_network_name = &quot;${azurerm_virtual_network.myterraformnetwork.name}&quot;
    address_prefix       = &quot;10.0.1.0/24&quot;
}

# Create public IPs
resource &quot;azurerm_public_ip&quot; &quot;myterraformpublicip&quot; {
    name                         = &quot;myPublicIP&quot;
    location                     = &quot;eastus&quot;
    resource_group_name          = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    allocation_method            = &quot;Dynamic&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create Network Security Group and rule
resource &quot;azurerm_network_security_group&quot; &quot;myterraformnsg&quot; {
    name                = &quot;myNetworkSecurityGroup&quot;
    location            = &quot;eastus&quot;
    resource_group_name = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    
    security_rule {
        name                       = &quot;SSH&quot;
        priority                   = 1001
        direction                  = &quot;Inbound&quot;
        access                     = &quot;Allow&quot;
        protocol                   = &quot;Tcp&quot;
        source_port_range          = &quot;*&quot;
        destination_port_range     = &quot;22&quot;
        source_address_prefix      = &quot;*&quot;
        destination_address_prefix = &quot;*&quot;
    }

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create network interface
resource &quot;azurerm_network_interface&quot; &quot;myterraformnic&quot; {
    name                      = &quot;myNIC&quot;
    location                  = &quot;eastus&quot;
    resource_group_name       = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    network_security_group_id = &quot;${azurerm_network_security_group.myterraformnsg.id}&quot;

    ip_configuration {
        name                          = &quot;myNicConfiguration&quot;
        subnet_id                     = &quot;${azurerm_subnet.myterraformsubnet.id}&quot;
        private_ip_address_allocation = &quot;Dynamic&quot;
        public_ip_address_id          = &quot;${azurerm_public_ip.myterraformpublicip.id}&quot;
    }

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Generate random text for a unique storage account name
resource &quot;random_id&quot; &quot;randomId&quot; {
    keepers = {
        # Generate a new ID only when a new resource group is defined
        resource_group = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    }
    
    byte_length = 8
}

# Create storage account for boot diagnostics
resource &quot;azurerm_storage_account&quot; &quot;mystorageaccount&quot; {
    name                        = &quot;diag${random_id.randomId.hex}&quot;
    resource_group_name         = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    location                    = &quot;eastus&quot;
    account_tier                = &quot;Standard&quot;
    account_replication_type    = &quot;LRS&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create virtual machine
resource &quot;azurerm_virtual_machine&quot; &quot;myterraformvm&quot; {
    name                  = &quot;myVM&quot;
    location              = &quot;eastus&quot;
    resource_group_name   = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    network_interface_ids = [&quot;${azurerm_network_interface.myterraformnic.id}&quot;]
    vm_size               = &quot;Standard_DS1_v2&quot;

    storage_os_disk {
        name              = &quot;myOsDisk&quot;
        caching           = &quot;ReadWrite&quot;
        create_option     = &quot;FromImage&quot;
        managed_disk_type = &quot;Premium_LRS&quot;
    }

    storage_image_reference {
        publisher = &quot;Canonical&quot;
        offer     = &quot;UbuntuServer&quot;
        sku       = &quot;16.04.0-LTS&quot;
        version   = &quot;latest&quot;
    }

    os_profile {
        computer_name  = &quot;myvm&quot;
        admin_username = &quot;azureuser&quot;
    }

    os_profile_linux_config {
        disable_password_authentication = true
        ssh_keys {
            path     = &quot;/home/azureuser/.ssh/authorized_keys&quot;
            key_data = &quot;ssh-rsa AAAAB3Nz{snip}hwhqT9h&quot;
        }
    }

    boot_diagnostics {
        enabled = &quot;true&quot;
        storage_uri = &quot;${azurerm_storage_account.mystorageaccount.primary_blob_endpoint}&quot;
    }

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br></div></div><h4 id="build-and-deploy-the-infrastructure"><a href="#build-and-deploy-the-infrastructure" aria-hidden="true" class="header-anchor">#</a> Build and deploy the infrastructure</h4> <p>With your Terraform template created, the first step is to initialize Terraform. This step ensures that Terraform has all the prerequisites to build your template in Azure.</p> <p><code>terraform init</code></p> <p>The next step is to have Terraform review and validate the template. This step compares the requested resources to the state information saved by Terraform and then outputs the planned execution. Resources are not created in Azure.</p> <p><code>terraform plan</code></p> <p>After you execute the previous command, you should see something like  below:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
...

Note: You didn’t specify an “-out” parameter to save this plan, so when
“apply” is called, Terraform can’t guarantee this is what will execute.
  + azurerm_resource_group.myterraform
      &lt;snip&gt;
  + azurerm_virtual_network.myterraformnetwork
      &lt;snip&gt;
  + azurerm_network_interface.myterraformnic
      &lt;snip&gt;
  + azurerm_network_security_group.myterraformnsg
      &lt;snip&gt;
  + azurerm_public_ip.myterraformpublicip
      &lt;snip&gt;
  + azurerm_subnet.myterraformsubnet
      &lt;snip&gt;
  + azurerm_virtual_machine.myterraformvm
      &lt;snip&gt;
Plan: 7 to add, 0 to change, 0 to destroy.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_7-if-everything-looks-correct-and-you-are-ready-to-build-the-infrastructure-in-azure-apply-the-template-in-terraform"><a href="#_7-if-everything-looks-correct-and-you-are-ready-to-build-the-infrastructure-in-azure-apply-the-template-in-terraform" aria-hidden="true" class="header-anchor">#</a> 7. If everything looks correct and you are ready to build the infrastructure in Azure, apply the template in Terraform:</h4> <p><code>terraform apply</code></p> <h4 id="_8-once-you-are-done-you-can-destroy-the-resources-by-executing"><a href="#_8-once-you-are-done-you-can-destroy-the-resources-by-executing" aria-hidden="true" class="header-anchor">#</a> 8. Once you are done, you can destroy the resources by executing</h4> <p><code>terraform destroy</code></p> <h4 id="_9-you-are-free-to-stop-the-vm-if-you-wish-to-save-money-on-compute-costs"><a href="#_9-you-are-free-to-stop-the-vm-if-you-wish-to-save-money-on-compute-costs" aria-hidden="true" class="header-anchor">#</a> 9. You are free to stop the VM if you wish to save money on Compute costs.</h4> <h4 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h4> <p>The Terraform Marketplace image makes it easy for users to get started using Terraform on Azure, without having to install and configure Terraform manually. There are no software charges for this Terraform VM image. You pay only the Azure Compute usage fees that are assessed based on the size of the virtual machine that's provisioned.  We encourage you to give it a try and share your experience with us.</p> <ul><li><p><a href="https://github.com/terraform-providers/terraform-provider-azurerm?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Terraform Azure examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://docs.microsoft.com/en-us/azure/terraform?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Terraform on Azure documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://www.terraform.io/docs/providers/azurerm/index.html?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Terraform Azure Provider<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul></div> <div class="page-edit" data-v-0e4468e2><div class="edit-link" data-v-0e4468e2><a href="https://github.com/microsoft/azuretipsandtricks/edit/master/blog/tip209.md" target="_blank" rel="noopener noreferrer" data-v-0e4468e2>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-0e4468e2 data-v-0e4468e2><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-0e4468e2><h2 data-v-0e4468e2>Share</h2> <a href="https://twitter.com/intent/tweet?text=Tip 209 - Prebuilt Terraform Image for Infrastructure Automation by @mbcrump http://azuredev.tips/blog/tip209.html" target="_blank" class="share__button" data-v-0e4468e2><i class="fab fa-twitter" data-v-0e4468e2></i> Tweet
    </a></section></div> <!----></div> <div class="page-nav" data-v-0e4468e2><p class="inner" data-v-0e4468e2><span class="prev" data-v-0e4468e2>
        ←
        <a href="/AzureTipsAndTricks/blog/tip141.html" class="prev" data-v-0e4468e2>
          Tip 141 - Generate a Zip file from Azure Blob Storage Files
        </a></span> <span class="next" data-v-0e4468e2><a href="/AzureTipsAndTricks/blog/tip207.html" data-v-0e4468e2>
          Tip 207 - Reduce Bruce Force attacks to Azure VMs
        </a>
        →
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.285e1406.js" defer></script><script src="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" defer></script><script src="/AzureTipsAndTricks/assets/js/126.2f361011.js" defer></script>
  </body>
</html>
